# 유니티(Unity) 프론트엔드 연동 방안

현재 제안된 멀티 모듈 아키텍처는 향후 유니티(Unity) 같은 외부 게임 엔진을 프론트엔드로 도입할 때 완벽하게 대응할 수 있는 구조입니다.

## 핵심 아이디어

-   **백엔드(Backend):** `core-module`과 `web-module`은 게임의 **두뇌** 역할을 하는 **API 서버**가 됩니다.
-   **프론트엔드(Frontend):** 유니티 프로젝트는 게임의 **얼굴** 역할을 하며, 서버가 계산한 결과를 시각적으로 보여주고 사용자 입력을 받는 **클라이언트(Client)**가 됩니다.

두 시스템은 네트워크를 통해 **REST API**로 통신하며, 데이터는 주로 **JSON** 형식을 사용합니다.

## 최종 아키텍처

```
+---------------------------------+      <-- 네트워크 (인터넷) -->      +-------------------------+
|         Java Backend            |                                     |     Unity Frontend      |
|  (서버 컴퓨터에서 실행)         |                                     | (유저 컴퓨터/모바일에서 실행) |
|---------------------------------|                                     |-------------------------|
|  [web-module]  <-- REST API --> |                                     |                         |
|      (Spring Boot)              |      (HTTP + JSON)                  |   [Unity Project]       |
|         ▲                       |                                     |       (C# Scripts)      |
|         | 의존                  |                                     |                         |
|  [core-module]                  |                                     |                         |
|      (핵심 로직)                |                                     |                         |
+---------------------------------+                                     +-------------------------+
```

## 데이터 흐름 예시: 플레이어의 스킬 사용

1.  **입력 (Unity):** 플레이어가 유니티 화면에서 스킬 버튼을 클릭하고 대상을 지정합니다.

2.  **API 요청 (Unity → Backend):** 유니티의 C# 스크립트는 서버의 정해진 주소(`api/battle/use-skill`)로 스킬 사용에 필요한 정보(플레이어 ID, 스킬 ID, 대상 ID 등)를 담아 **HTTP 요청**을 보냅니다.

3.  **로직 처리 (Backend):**
    -   `web-module`의 컨트롤러가 요청을 받아 `core-module`의 `BattleService`를 호출합니다.
    -   `BattleService`는 데미지 계산, 상태 변화 등 모든 핵심 게임 로직을 **서버 사이드에서** 안전하게 처리합니다.

4.  **결과 응답 (Backend → Unity):**
    -   `BattleService`는 처리 결과를 데이터 객체(DTO)로 반환합니다.
    -   `web-module`은 이 결과를 **JSON 형식으로 변환**하여 유니티 클라이언트에 응답으로 보내줍니다. (예: `{ "damageDealt": 75, "targetNewHp": 25, ... }`)

5.  **결과 반영 (Unity):**
    -   유니티는 서버로부터 받은 JSON 데이터를 바탕으로 게임 화면을 업데이트합니다.
    -   데미지 숫자 표시, HP 바 감소, 스킬 이펙트 및 애니메이션 재생 등 시각적인 연출을 수행합니다.

## 이 구조의 장점

-   **완벽한 역할 분리:** 백엔드(로직)와 프론트엔드(그래픽) 개발을 독립적으로 진행할 수 있습니다.
-   **강력한 보안:** 모든 중요한 계산이 서버에서 이루어지므로 클라이언트 조작(치팅)을 원천적으로 방지할 수 있습니다.
-   **플랫폼 확장성:** 잘 만들어진 백엔드 API 서버 하나로 유니티, 웹, 모바일 앱 등 다양한 클라이언트를 지원할 수 있습니다.

결론적으로, 현재 제안된 아키텍처로의 전환은 향후 유니티 연동을 위한 가장 이상적인 준비 작업입니다.
